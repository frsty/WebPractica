{% extends 'core/base.html'%}

{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'core/css/agendar.css' %}">
{% endblock %}

{% block js %}
<script src="{% static 'core/js/agenda.js' %}"></script>
{% endblock %}

{% block content%}

<div class="jumbotron jumbotron-fluid" id="fagendar">

    <div class="container-fluid">


        <br>
    
        <div class="row">
            <div class="col-sm-3"></div>
            <div class="col-sm-6">
                <form action="" method="POST">
                    {% csrf_token %}
                    <!--Cambiar despues-->
                    <div class="card text-left">
                        <div class="card-body">
                            <h4 class="card-title">Agendar servicio</h4>
    
                            <div class="form-group">
                                <label for="">Nombre</label>
                                <div class="input-group mb-3">
                                    <input type="text" required="required" class="form-control" name="txtNombre"  >
                                    <input type="text" required="required" class="form-control" name="txtApellido" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Telefono</label>
                                <input type="number" required="required" class="form-control" name="txtTelefono" placeholder="123456789">
    
                            </div>
                            <div class="form-group">
                                <label for="">Correo</label>
                                <input type="email" required="required" class="form-control" name="txtEmail" value="{{user.email}}">
    
                            </div>
                            <!--<div class="form-group">
                                <label for="">Hora</label>
                                <input type="time" required="required" class="form-control" name="txtHora" placeholder="example@example.com">
    
                            </div>-->
                            <div class="form-group">
                                <label for="">Fecha</label>
                                <input type="date" required="required" class="form-control" name="txtFecha" placeholder="example@example.com">
    
                            </div>
                            <div class="form-group">
                                <label for="">Lista de servicios</label>
                                <select class="form-control" id="cbService" onchange="CambiarTipo()" name="cbService">
                                    <option value="">Seleccione un Servicio</option>

                                    {% for t in tipo %}

                                        <option value="{{t.id}}">{{t.tipo}}</option>

                                    {% endfor %}
                                </select>

                            </div>
                            <div class="form-group">
                                <label for="">Servicios</label>
                                <select class="form-control" id="cbTipoService" onchange="" name="cbTipoService">
                                    <Option>Selecciones el servicio</Option> 
                                    <!-- {% for s in servicio %}
                                        <option value="{{s.id}}">{{s.nombre}}</option>
                                    {% endfor %}   -->
                                 </select>
                                 
                            </div>
                            <!--<div class="form-group">
                                <label>Precio</label>

                                <input type="text" onchange="" readonly>

                            </div>-->
                            <a href=""><button type="submit" class="btn btn-primary">Agendar</button></a>
                            <a href="{% url 'home' %}" style="color: white">Volver<Button type="button"
                                    class="btn btn-danger">Volver</Button> </a>
                        </div>
                    </div>
                </form>
                
            </div>
            <div class="col-sm-3"></div>
        </div>
        <br>
    
    </div>

</div>

<script type="text/javascript">
    let serviciosyTipos = {};
    serviciosyTipos[1]=["probando","esta","cosa"]
    serviciosyTipos[2]=["ahora","con","masajes"]

function CambiarTipo(){
    let servList = document.getElementById("cbService");
    let tipoList = document.getElementById("cbTipoService");
    let selectServ = servList.options[servList.selectedIndex].value;
    while (tipoList.options.length){
        tipoList.remove(0);
    }
    let serviciosList = serviciosyTipos[selectServ];
    if(serviciosList){
        let i
        for(i = 0;i < serviciosList.length; i++){
            let ss = new Option(serviciosList[i],i);
            tipoList.options.add(ss);
        }
    }
}
</script>

{% endblock %}